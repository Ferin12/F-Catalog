/*
* A few performance improvements and release of jQuery dependency by the Wikia
* https://github.com/Wikia/js-menu-aim
* git@github.com:Wikia/js-menu-aim.git
*
* forked from: https://github.com/kamens/jQuery-menu-aim
*
* Works on IE9+ (because of addEventListener...)
*/
(()=>{let e,t,o;t={mouseLocs:[],mousemoveTracked:!1},o={filter(e,t){let o,n,i,r,u,l;for(l=[],o=e.length,n=0;n<o;++n)if(e[n]&&e[n].parentNode)for(r=(i=e[n].parentNode.querySelectorAll(t)).length,u=0;u<r;++u)i[u]===e[n]&&l.push(e[n]);return l},extend(e,t){let o;for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},slope:(e,t)=>(t.y-e.y)/(t.x-e.x)},e=function(){let e,n,i,r,u,l,s,c,a,d,m,f,p,v,h,y,w,x,g;r=null,c=null,u=t.mouseLocs,s={activeRow:null,rowSelector:null,submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:Function.prototype,exit:Function.prototype,activate:Function.prototype,deactivate:Function.prototype,exitMenu:Function.prototype},n=3,e=300,this.init=function(e,t){let n,r,u;for(l=e,s=o.extend(s,t),i=s.activeRow,l.addEventListener("mouseleave",v),l.addEventListener("mouseenter",p),n=0,r=(u=s.rowSelector?l.querySelectorAll(s.rowSelector):l.childNodes).length;n<r;++n)u[n].addEventListener("mouseenter",f),u[n].addEventListener("mouseleave",h),u[n].addEventListener("click",m);return this},this.resetActiveRow=(()=>{i=s.activeRow}),g=(()=>{t.mousemoveTracked||window.touchstart||(document.addEventListener("mousemove",y),t.mousemoveTracked=!0)}),x=(()=>{t.mousemoveTracked&&(document.removeEventListener("mousemove",y),t.mousemoveTracked=!1)}),y=(({pageX:e,pageY:t})=>{u.push({x:e,y:t}),u.length>3&&u.shift()}),v=function(){c&&clearTimeout(c),i&&s.exitMenu(this)&&(s.deactivate(i),i=null),x()},p=(()=>{g()}),f=function(){c&&clearTimeout(c),s.enter(this),w(this)},h=function(){s.exit(this)},m=function(e){a(this,e)},a=((e,t)=>{e!==i&&(i&&s.deactivate(i,t),s.activate(e,t),i=e)}),w=(e=>{const t=d();t?c=setTimeout(()=>{w(e)},t):a(e)}),d=(()=>{let e,t,n,c,a,d,m,f,p,v,h,y,w;return!i||"*"!==s.submenuSelector&&0===o.filter([i],s.submenuSelector).length?0:(t={x:(e=l.getBoundingClientRect()).left,y:e.top+window.pageYOffset-s.tolerance},n={x:e.left+l.offsetWidth,y:t.y},c={x:e.left,y:e.top+window.pageYOffset+l.offsetHeight+s.tolerance},a={x:e.left+l.offsetWidth,y:c.y},d=u[u.length-1],m=u[0],d?(m||(m=d),m.x<e.left||m.x>a.x||m.y<e.top||m.y>a.y?0:r&&d.x===r.x&&d.y===r.y?0:(f=n,p=a,"left"===s.submenuDirection?(f=c,p=t):"below"===s.submenuDirection?(f=a,p=c):"above"===s.submenuDirection&&(f=t,p=n),v=o.slope(d,f),h=o.slope(d,p),y=o.slope(m,f),w=o.slope(m,p),v<y&&h>w?(r=d,300):(r=null,0))):0)})},window.menuAim=((t,o)=>{let n;return(n=new e).init(t,o)})})();
